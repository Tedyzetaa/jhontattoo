<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jhow Tattoo Studio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <img src="https://res.cloudinary.com/dgvwgvial/image/upload/v1763681818/logo_b4tvcv.png" alt="Jhow Tattoo Studio">
                </div>
                <button class="book-btn" id="bookBtn">Agende sua Tattoo</button>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h2>UM TRA√áO EM SUA HIST√ìRIA</h2>
        </div>
    </section>

    <!-- Gallery Section -->
    <section class="gallery-section">
        <div class="container">
            <h2 class="section-title">Nossos Trabalhos</h2>
            
            <!-- Images Gallery -->
            <div class="gallery-category">
                <h3 class="category-title">Galeria de Fotos</h3>
                <div class="gallery-scroll-container">
                    <button class="scroll-btn scroll-left" id="scrollLeftImages">‚Äπ</button>
                    <div class="gallery-scroll" id="imageGallery">
                        <!-- Images will be loaded here by JavaScript -->
                    </div>
                    <button class="scroll-btn scroll-right" id="scrollRightImages">‚Ä∫</button>
                </div>
                <div class="gallery-indicator" id="imageIndicator"></div>
            </div>
            
            <!-- Videos Gallery -->
            <div class="gallery-category">
                <h3 class="category-title">Galeria de V√≠deos</h3>
                <div class="gallery-scroll-container">
                    <button class="scroll-btn scroll-left" id="scrollLeftVideos">‚Äπ</button>
                    <div class="gallery-scroll" id="videoGallery">
                        <!-- Videos will be loaded here by JavaScript -->
                    </div>
                    <button class="scroll-btn scroll-right" id="scrollRightVideos">‚Ä∫</button>
                </div>
                <div class="gallery-indicator" id="videoIndicator"></div>
            </div>
            
            <!-- Instagram Link -->
            <div class="instagram-link">
                <p>Para ver mais trabalhos acesse nosso Instagram</p>
                <a href="https://www.instagram.com/jhowt4ttoo?igsh=MW4xb2N6b21mbmJiMg==" target="_blank" class="instagram-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"/>
                    </svg>
                    @jhowt4ttoo
                </a>
            </div>
        </div>
    </section>

    <!-- Media Modal -->
    <div class="modal" id="mediaModal">
        <div class="modal-content">
            <button class="modal-close" id="modalClose">&times;</button>
            <div class="modal-media-container">
                <img class="modal-media" id="modalImage" src="" alt="" style="display: none;">
                <video class="modal-media" id="modalVideo" controls style="display: none;"></video>
            </div>
            <div class="modal-info">
                <h3 class="modal-title" id="modalTitle"></h3>
                <div class="modal-details">
                    <span id="modalArtist"></span>
                    <span id="modalCategory"></span>
                </div>
                <p class="modal-description" id="modalDescription"></p>
            </div>
        </div>
    </div>

    <!-- Auth Modal -->
    <div class="auth-modal" id="authModal">
        <div class="auth-content">
            <div class="auth-header">
                <h3>Agendar Tatuagem</h3>
            </div>
            <div class="auth-body">
                <p>Fa√ßa login para agendar sua tatuagem</p>
                <button class="google-btn" id="googleLogin">
                    <img src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTgiIGhlaWdodD0iMTgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNMTcuNiA5LjJsLS4xLTEuOEg5djMuNGg0LjhDMTMuNiAxMiAxMyAxMyAxMiAxMy42djIuMmgzYTguOCA4LjggMCAwIDAgMi42LTYuNnoiIGZpbGw9IiM0Mjg1RjQiIGZpbGwtcnVsZT0ibm9uemVybyIvPjxwYXRoIGQ9Ik05IDE4YzIuNCAwIDQuNS0uOCA2LTIuMmwtMy0yLjJhNS40IDUuNCAwIDAgMS04LTIuOUgxVjEzYTkgOSAwIDAgMCA4IDV6IiBmaWxsPSIjMzRBODUzIiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBkPSJNNCAxMC43YTUuNCA1LjQgMCAwIDEgMC0zLjRWNUgxYTkgOSAwIDAgMCAwIDhsMy0yLjN6IiBmaWxsPSIjRkJCQzA1IiBmaWxsLXJ1bGU9Im5vbnplcm8iLz48cGF0aCBkPSJNOSAzLjZjMS4zIDAgMi41LjQgMy40IDEuM0wxNSAyLjNBOSA5IDAgMCAwIDEgNWwzIDIuNGE1LjQgNS40IDAgMCAxIDUtMy43eiIgZmlsbD0iI0VBNDMzNSIgZmlsbC1ydWxlPSJub256ZXJvIi8+PHBhdGggZD0iTTAgMGgxOHYxOEgweiIvPjwvZz48L3N2Zz4=" alt="Google">
                    Continuar com Google
                </button>
            </div>
            <div class="auth-footer">
                N√£o √© obrigat√≥rio fazer login para visualizar nossos trabalhos
            </div>
        </div>
    </div>

    <!-- Booking Modal -->
    <div class="booking-modal" id="bookingModal">
        <div class="booking-content">
            <div class="booking-header">
                <h3>Agendar Tatuagem</h3>
                <button class="booking-close" id="bookingClose">&times;</button>
            </div>
            <div class="booking-body">
                <form id="bookingForm">
                    <div class="form-group">
                        <label for="fullName">Nome Completo</label>
                        <input type="text" id="fullName" name="fullName" required>
                    </div>
                    <div class="form-group">
                        <label for="whatsapp">WhatsApp</label>
                        <input type="tel" id="whatsapp" name="whatsapp" required>
                    </div>
                    <div class="form-group">
                        <label for="bodyPart">Onde gostaria de fazer a tatuagem?</label>
                        <select id="bodyPart" name="bodyPart" required>
                            <option value="">Selecione uma op√ß√£o</option>
                            <option value="Bra√ßo">Bra√ßo</option>
                            <option value="Antebra√ßo">Antebra√ßo</option>
                            <option value="Ombro">Ombro</option>
                            <option value="Costas">Costas</option>
                            <option value="Peito">Peito</option>
                            <option value="Perna">Perna</option>
                            <option value="Panturrilha">Panturrilha</option>
                            <option value="M√£o">M√£o</option>
                            <option value="P√©">P√©</option>
                            <option value="Pesco√ßo">Pesco√ßo</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <p class="text-secondary" style="font-size: 0.9rem; margin-top: 5px;">
                            N√£o se esque√ßa de mandar o modelo de tatuagem que gostaria de ser feito no WhatsApp!
                        </p>
                    </div>
                    <div class="form-group">
                        <label for="additionalInfo">Informa√ß√µes adicionais (opcional)</label>
                        <textarea id="additionalInfo" name="additionalInfo" placeholder="Tamanho desejado, cores, estilo..."></textarea>
                    </div>
                    <button type="submit" class="submit-btn" id="submitBooking">
                        <span class="spinner" id="submitSpinner" style="display: none;"></span>
                        <span id="submitText">Enviar Agendamento</span>
                    </button>
                    <div class="error-message" id="bookingError" style="display: none;"></div>
                </form>
                <div class="success-message" id="bookingSuccess" style="display: none;">
                    Agendamento enviado com sucesso! Em breve entraremos em contato pelo WhatsApp.
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section contact-info">
                    <h4>Contato</h4>
                    <p><i>üìç</i> Rua Dr. Franco Cinato, 272, Bairro Piraveve</p>
                    <p><i>üìû</i> (47) 99971-3264</p>
                    <p><i>‚úâÔ∏è</i> contato@jhowtattoo.com</p>
                    <div class="social-links">
                        <a href="#" class="social-link">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/>
                            </svg>
                        </a>
                        <a href="#" class="social-link">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633z"/>
                            </svg>
                        </a>
                        <a href="#" class="social-link">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                                <path d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.28.11-.704.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"/>
                            </svg>
                        </a>
                    </div>
                </div>
                <div class="footer-section">
                    <h4>Hor√°rio de Funcionamento</h4>
                    <p>Atendimento com hora marcada</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 Jhow Tattoo Studio. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- Carregar configura√ß√µes primeiro -->
    <script>
        // =================================================================
        // IN√çCIO: Conte√∫do de config.js
        // =================================================================
        const FIREBASE_CONFIG = {
            apiKey: "AIzaSyDsHzmc1HNyTroBpnTBPCdYJEqz5VAnToI", // Copie do painel do Firebase
            authDomain: "jhontattoo-4922e.firebaseapp.com",
            projectId: "jhontattoo-4922e",
            storageBucket: "jhontattoo-4922e.appspot.com",
            messagingSenderId: "273673583724", // Copie do painel do Firebase
            appId: "1:273673583724:web:e38dae93beb69ae077ec49" // Copie do painel do Firebase
        };

        const BACKEND_URL_CONFIG = "https://jhontattoo-backend.onrender.com";

        // Exportar para uso global
        window.APP_CONFIG = {
            FIREBASE_CONFIG,
            BACKEND_URL: BACKEND_URL_CONFIG
        };

        // =================================================================
        // FIM: Conte√∫do de config.js
        // =================================================================


        // =================================================================
        // IN√çCIO: Conte√∫do de auth.js
        // =================================================================
        if (!window.APP_CONFIG || !window.APP_CONFIG.FIREBASE_CONFIG) {
            console.error('Configura√ß√µes do Firebase n√£o encontradas. Verifique o arquivo config.js');
            document.addEventListener('DOMContentLoaded', function() {
                const bookBtn = document.getElementById('bookBtn');
                if (bookBtn) {
                    bookBtn.textContent = 'Erro de Configura√ß√£o';
                    bookBtn.style.backgroundColor = '#ff4444';
                    bookBtn.disabled = true;
                }
            });
        } else {
            try {
                firebase.initializeApp(window.APP_CONFIG.FIREBASE_CONFIG);
                console.log('Firebase inicializado com sucesso');
            } catch (error) {
                console.error('Erro ao inicializar Firebase:', error);
            }
        }

        const auth = firebase.auth();
        let auth_currentUser = null; // Renomeado para evitar conflito

        const auth_bookBtn = document.getElementById('bookBtn');
        const auth_authModal = document.getElementById('authModal');
        const auth_googleLogin = document.getElementById('googleLogin');
        const auth_bookingModal = document.getElementById('bookingModal');

        auth.onAuthStateChanged((user) => {
            auth_currentUser = user;
            auth_updateUI(user);
        });

        function auth_updateUI(user) {
            if (user) {
                auth_bookBtn.innerHTML = `
                    <div class="user-info">
                        <img src="${user.photoURL || 'data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0iI2ZmZmZmZiI+PHBhdGggZD0iTTEyIDJDNi40OCAyIDIgNi40OCAyIDEyczQuNDggMTAgMTAgMTAgMTAtNC40OCAxMC0xMFMxNy41MiAyIDEyIDJ6bTAgM2MzLjMxIDAgNiAyLjY5IDYgNnMtMi42OSA2LTYgNi02LTIuNjktNi02IDIuNjktNiA2LTZ6bTAgMTdjLTIuNjcgMC04IDEuMzQtOCA0djJoMTZ2LTJjMC0yLjY2LTUuMzMtNC04LTR6Ii8+PC9zdmc+'}" 
                             alt="Avatar" class="user-avatar">
                        <span class="user-name">${user.displayName || 'Usu√°rio'}</span>
                    </div>
                    <button class="logout-btn" id="logoutBtn">Sair</button>
                `;
            } else {
                auth_bookBtn.innerHTML = 'Agende sua Tattoo';
            }
        }

        function auth_handleBookBtnClick(event) {
            if (event.target.closest('#logoutBtn')) {
                auth_handleLogout();
                return;
            }
            if (auth_currentUser) {
                openBookingModal(); // Fun√ß√£o de app.js
            } else {
                auth_openAuthModal();
            }
        }

        function auth_handleGoogleLogin() {
            if (!firebase.apps.length) {
                alert('Erro de configura√ß√£o do Firebase. Por favor, recarregue a p√°gina.');
                return;
            }
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider)
                .then((result) => {
                    console.log('User signed in:', result.user);
                    auth_closeAuthModal();
                })
                .catch((error) => {
                    console.error('Error during Google login:', error);
                    let errorMessage = 'Erro ao fazer login com Google. Tente novamente.';
                    if (error.code === 'auth/popup-blocked') {
                        errorMessage = 'Popup bloqueado. Por favor, permita popups para este site.';
                    } else if (error.code === 'auth/popup-closed-by-user') {
                        errorMessage = 'Login cancelado.';
                    } else if (error.code === 'auth/unauthorized-domain') {
                        errorMessage = 'Dom√≠nio n√£o autorizado. Verifique as configura√ß√µes do Firebase.';
                    } else if (error.code.includes('api-key-not-valid')) {
                        errorMessage = 'Chave API inv√°lida. Verifique as configura√ß√µes do Firebase.';
                    }
                    alert(errorMessage);
                });
        }

        function auth_handleLogout() {
            auth.signOut().then(() => {
                console.log('User signed out');
            }).catch((error) => {
                console.error('Error during logout:', error);
            });
        }

        function auth_openAuthModal() {
            auth_authModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function auth_closeAuthModal() {
            auth_authModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        if (auth_bookBtn) {
            auth_bookBtn.addEventListener('click', auth_handleBookBtnClick);
        }
        if (auth_googleLogin) {
            auth_googleLogin.addEventListener('click', auth_handleGoogleLogin);
        }
        if (auth_authModal) {
            auth_authModal.addEventListener('click', (e) => {
                if (e.target === auth_authModal) auth_closeAuthModal();
            });
        }
        // =================================================================
        // FIM: Conte√∫do de auth.js
        // =================================================================


        // =================================================================
        // IN√çCIO: Conte√∫do de app.js
        // =================================================================
        const isVercel = window.location.hostname.includes('vercel.app') || 
                         window.location.hostname.includes('now.sh');

        console.log('Environment:', isVercel ? 'Vercel' : 'Local');
        console.log('Current URL:', window.location.href);

        // Atualizei as imagens conforme solicitado
        const imageFiles = [
            'https://res.cloudinary.com/dgvwgvial/image/upload/v1763681798/1_kxrfxl.jpg',
            'https://res.cloudinary.com/dgvwgvial/image/upload/v1763681797/2_rlnu3z.jpg',
            'https://res.cloudinary.com/dgvwgvial/image/upload/v1763681798/3_npkuy6.jpg',
            'https://res.cloudinary.com/dgvwgvial/image/upload/v1763681797/4_lknbmc.jpg',
            'https://res.cloudinary.com/dgvwgvial/image/upload/v1763681798/5_boulm0.jpg',
            'https://res.cloudinary.com/dgvwgvial/image/upload/v1763681799/6_zdmxkk.jpg',
            'https://res.cloudinary.com/dgvwgvial/image/upload/v1763681798/7_p8qukx.jpg'
        ];

        // Atualizei os v√≠deos conforme solicitado
        const videoFiles = [
            'https://res.cloudinary.com/dgvwgvial/video/upload/v1763681800/10_l0wpej.mp4',
            'https://res.cloudinary.com/dgvwgvial/video/upload/v1763681802/11_bpetc5.mp4',
            'https://res.cloudinary.com/dgvwgvial/video/upload/v1763681804/12_u5vplc.mp4',
            'https://res.cloudinary.com/dgvwgvial/video/upload/v1763681803/13_j9uiup.mp4',
            'https://res.cloudinary.com/dgvwgvial/video/upload/v1763681802/14_snqeus.mp4'
        ];

        const imageGallery = document.getElementById('imageGallery');
        const videoGallery = document.getElementById('videoGallery');
        const scrollLeftImages = document.getElementById('scrollLeftImages');
        const scrollRightImages = document.getElementById('scrollRightImages');
        const scrollLeftVideos = document.getElementById('scrollLeftVideos');
        const scrollRightVideos = document.getElementById('scrollRightVideos');
        const imageIndicator = document.getElementById('imageIndicator');
        const videoIndicator = document.getElementById('videoIndicator');
        const mediaModal = document.getElementById('mediaModal');
        const modalImage = document.getElementById('modalImage');
        const modalVideo = document.getElementById('modalVideo');
        const modalTitle = document.getElementById('modalTitle');
        const modalArtist = document.getElementById('modalArtist');
        const modalCategory = document.getElementById('modalCategory');
        const modalDescription = document.getElementById('modalDescription');
        const modalClose = document.getElementById('modalClose');
        const bookingClose = document.getElementById('bookingClose');
        const bookingForm = document.getElementById('bookingForm');
        const submitBooking = document.getElementById('submitBooking');
        const submitSpinner = document.getElementById('submitSpinner');
        const submitText = document.getElementById('submitText');
        const bookingError = document.getElementById('bookingError');
        const bookingSuccess = document.getElementById('bookingSuccess');
        const bookingModal = document.getElementById('bookingModal'); // J√° definido em auth.js, mas referenciado aqui

        const BACKEND_URL = window.APP_CONFIG ? window.APP_CONFIG.BACKEND_URL : 'https://jhontattoo-backend.onrender.com';

        let currentImageIndex = 0;
        let currentVideoIndex = 0;

        function createPlaceholder(type, index) {
            const placeholder = document.createElement('div');
            placeholder.className = 'gallery-item placeholder';
            placeholder.innerHTML = `<div class="placeholder-content"><div class="placeholder-icon">${type === 'image' ? 'üì∑' : 'üé•'}</div><div class="placeholder-text">${type === 'image' ? 'Imagem' : 'V√≠deo'} ${index + 1}<br><small>Carregando...</small></div></div>`;
            return placeholder;
        }

        async function loadImageGallery() {
            if (!imageGallery) return;
            imageGallery.innerHTML = '<div class="loading">Carregando imagens...</div>';
            const loadPromises = imageFiles.map(async (src, i) => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'gallery-item';
                galleryItem.setAttribute('data-index', i);
                const img = new Image();
                img.src = src;
                img.alt = `Tattoo image ${i + 1}`;
                img.loading = 'lazy';
                img.onload = () => galleryItem.classList.add('loaded');
                img.onerror = () => {
                    galleryItem.innerHTML = `<div class="placeholder-content"><div class="placeholder-icon">‚ùå</div><div class="placeholder-text">Erro</div></div>`;
                    galleryItem.classList.add('error');
                };
                galleryItem.appendChild(img);
                galleryItem.addEventListener('click', () => openMediaModal('image', src, i));
                return galleryItem;
            });
            const galleryItems = await Promise.all(loadPromises);
            imageGallery.innerHTML = '';
            galleryItems.forEach(item => imageGallery.appendChild(item));
            createIndicator(imageIndicator, imageFiles.length, 0);
        }

        async function loadVideoGallery() {
            if (!videoGallery) return;
            videoGallery.innerHTML = '<div class="loading">Carregando v√≠deos...</div>';
            const loadPromises = videoFiles.map(async (src, i) => {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'gallery-item';
                galleryItem.setAttribute('data-index', i);
                const video = document.createElement('video');
                video.src = src;
                video.preload = 'metadata';
                video.muted = true;
                const playIcon = document.createElement('div');
                playIcon.className = 'play-icon';
                video.onloadeddata = () => galleryItem.classList.add('loaded');
                video.onerror = () => {
                    galleryItem.innerHTML = `<div class="placeholder-content"><div class="placeholder-icon">‚ùå</div><div class="placeholder-text">Erro</div></div>`;
                    galleryItem.classList.add('error');
                };
                galleryItem.appendChild(video);
                galleryItem.appendChild(playIcon);
                galleryItem.addEventListener('click', () => openMediaModal('video', src, i));
                return galleryItem;
            });
            const galleryItems = await Promise.all(loadPromises);
            videoGallery.innerHTML = '';
            galleryItems.forEach(item => videoGallery.appendChild(item));
            createIndicator(videoIndicator, videoFiles.length, 0);
        }

        function createIndicator(container, count, activeIndex) {
            if (!container) return;
            container.innerHTML = '';
            for (let i = 0; i < count; i++) {
                const dot = document.createElement('div');
                dot.className = 'indicator-dot';
                if (i === activeIndex) dot.classList.add('active');
                dot.addEventListener('click', () => scrollToItem(container === imageIndicator ? 'image' : 'video', i));
                container.appendChild(dot);
            }
        }

        function scrollToItem(type, index) {
            const gallery = type === 'image' ? imageGallery : videoGallery;
            if (!gallery) return;
            const items = gallery.querySelectorAll('.gallery-item');
            if (items.length === 0) return;
            const itemWidth = items[0].offsetWidth + 15;
            gallery.scrollTo({ left: itemWidth * index, behavior: 'smooth' });
            if (type === 'image') currentImageIndex = index;
            else currentVideoIndex = index;
            updateIndicator(type === 'image' ? imageIndicator : videoIndicator, index);
        }

        function updateIndicator(container, activeIndex) {
            const dots = container.querySelectorAll('.indicator-dot');
            dots.forEach((dot, index) => dot.classList.toggle('active', index === activeIndex));
        }

        function openMediaModal(type, src, index) {
            modalImage.style.display = 'none';
            modalVideo.style.display = 'none';
            if (type === 'image') {
                modalImage.src = src;
                modalImage.style.display = 'block';
                modalTitle.textContent = `Tatuagem ${index + 1}`;
            } else {
                modalVideo.src = src;
                modalVideo.style.display = 'block';
                modalTitle.textContent = `Processo de Tatuagem ${index + 1}`;
            }
            mediaModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            if (!mediaModal) return;
            if (modalVideo.style.display !== 'none') modalVideo.pause();
            mediaModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        function openBookingModal() {
            bookingModal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeBookingModal() {
            if (!bookingModal) return;
            bookingModal.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        if (bookingForm) {
            bookingForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                const user = firebase.auth().currentUser;
                if (!user) {
                    bookingError.textContent = 'Voc√™ precisa estar logado para agendar.';
                    bookingError.style.display = 'block';
                    return;
                }
                const formData = new FormData(bookingForm);
                submitSpinner.style.display = 'inline-block';
                submitText.textContent = 'Enviando...';
                submitBooking.disabled = true;
                bookingError.style.display = 'none';

                // --- NOVA L√ìGICA PARA WHATSAPP DIRETO ---
                const fullName = document.getElementById('fullName').value;
                const bodyPart = document.getElementById('bodyPart').value;
                const additionalInfo = document.getElementById('additionalInfo').value;
                const tattooArtistWhatsapp = "5547999713264";
                
                let message = `Ol√°! Gostaria de agendar uma tatuagem.\n\n`;
                message += `*Nome:* ${fullName}\n`;
                message += `*Parte do Corpo:* ${bodyPart}\n`;
                if (additionalInfo) message += `*Detalhes:* ${additionalInfo}\n`;

                const whatsappUrl = `https://wa.me/${tattooArtistWhatsapp}?text=${encodeURIComponent(message)}`;

                // Abre a URL do WhatsApp
                window.open(whatsappUrl, '_blank');

                // Exibe mensagem de sucesso e reseta o formul√°rio
                bookingSuccess.textContent = 'Tudo pronto! Finalize o contato no WhatsApp.';
                bookingForm.style.display = 'none';
                bookingSuccess.style.display = 'block';

                setTimeout(() => {
                    closeBookingModal();
                    bookingForm.style.display = 'block';
                    bookingSuccess.style.display = 'none';
                    bookingForm.reset();
                    fileName.textContent = 'Nenhum arquivo selecionado';
                    submitSpinner.style.display = 'none';
                    submitText.textContent = 'Enviar Agendamento';
                    submitBooking.disabled = false;
                }, 4000);
            });
        }

        if (modalClose) modalClose.addEventListener('click', closeModal);
        if (mediaModal) mediaModal.addEventListener('click', (e) => { if (e.target === mediaModal) closeModal(); });
        if (scrollLeftImages) scrollLeftImages.addEventListener('click', () => { currentImageIndex = scrollGallery(imageGallery, 'left', imageIndicator, currentImageIndex); });
        if (scrollRightImages) scrollRightImages.addEventListener('click', () => { currentImageIndex = scrollGallery(imageGallery, 'right', imageIndicator, currentImageIndex); });
        if (scrollLeftVideos) scrollLeftVideos.addEventListener('click', () => { currentVideoIndex = scrollGallery(videoGallery, 'left', videoIndicator, currentVideoIndex); });
        if (scrollRightVideos) scrollRightVideos.addEventListener('click', () => { currentVideoIndex = scrollGallery(videoGallery, 'right', videoIndicator, currentVideoIndex); });
        if (bookingClose) bookingClose.addEventListener('click', closeBookingModal);
        if (bookingModal) bookingModal.addEventListener('click', (e) => { if (e.target === bookingModal) closeBookingModal(); });

        document.addEventListener('keydown', (e) => {
            if (mediaModal.classList.contains('active') && e.key === 'Escape') closeModal();
        });

        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                loadImageGallery();
                loadVideoGallery();
            }, 100);
        });
        // =================================================================
        // FIM: Conte√∫do de app.js
        // =================================================================
    </script>
</body>
</html>